---
title: 安全
---

## sql 注入

校验输入，不拼接 SQL  
不用 root，加密/hash

## XSS

恶意 html/js，获取 cookie  
`<>;` 做过滤，encode  
cookie 不包含隐私  
cookie、ip 绑定  
Set-Cookie，HttpOnly


Cross-Site Scripting (XSS) 是一种注入类攻击，其手段是将恶意脚本注入到良性、健康的网站中。通常发生在以下情况：

* 数据通过一个不受信任的来源（最常见的是网络请求）进入网页。
* 数据被包含在动态内容中，在没有验证恶意内容的情况下被发送给网络用户。

发送给网络浏览器的恶意内容通常以 JavaScript 片段的形式出现，但也可能包括 HTML、Flash 或浏览器可能执行的任何其他类型的代码。理论上，基于 XSS 的攻击种类几乎是无限的，但通常为向攻击者传输私人数据，如 cookie 或其他会话信息，将受害者重定向到由攻击者控制的网页内容，或以脆弱网站为幌子在用户的机器上执行其他恶意操作。

XSS 的主要分类：

* 反射式，Reflected XSS Attacks  
当用户的输入被 web 程序立即时，（可能是错误信息、搜索结果或任何其他响应），server 返回的内容包含请求中的一部分，也就是用户所提供的输入，浏览器加载这些危险的数据后，即遭到攻击。区别于存储式，此时服务器没有永久地存储用户提供的数据。在某些情况下，用户提供的数据甚至可能永远不会离开浏览器（见下文基于DOM的XSS）。

* 存储式，Stored XSS Attacks  
指用户输入被存储在目标服务器上，如数据库、信息论坛、访问者日志、评论栏等。然后，受害者加载这些存储的数据，从而遭到其攻击。此外，随着 HTML5 和其他浏览器技术的出现，危险的数据可以永久地存储浏览器中，如 HTML5 数据库，根本不会被发送到服务器上。

* 基于DOM的XSS，DOM Based XSS。  
这种类型不如前两者知名，指整个数据流都发生在浏览器中，即数据源在 DOM 中，目的地也在 DOM 中，从未离开浏览器。例如，源（恶意数据被读取的地方）可以是页面的URL（如document.location.href），也可以是HTML的一个元素，而目的地是导致执行恶意数据的敏感方法调用（如document.write）。



## CSRF
