"use strict";(self.webpackChunkdocusaurus_demo=self.webpackChunkdocusaurus_demo||[]).push([[9197],{7168:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>d});var r=t(30758);const o={},s=r.createContext(o);function c(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),r.createElement(s.Provider,{value:n},e.children)}},76638:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>l,frontMatter:()=>c,metadata:()=>r,toc:()=>i});const r=JSON.parse('{"id":"library/react/render","title":"Render","description":"re-render","source":"@site/docs/library/react/render.md","sourceDirName":"library/react","slug":"/library/react/render","permalink":"/docs/library/react/render","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Render"},"sidebar":"Library","previous":{"title":"\u6027\u80fd","permalink":"/docs/library/react/react-performance"},"next":{"title":"Conditional Rendering","permalink":"/docs/library/react/conditional-rendering"}}');var o=t(86070),s=t(7168);const c={title:"Render"},d=void 0,a={},i=[{value:"re-render",id:"re-render",level:2},{value:"Context",id:"context",level:3},{value:"Zustand",id:"zustand",level:3}];function u(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",mermaid:"mermaid",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"re-render",children:"re-render"}),"\n",(0,o.jsx)(n.h3,{id:"context",children:"Context"}),"\n",(0,o.jsx)(n.p,{children:"\u5f53 Context \u53d8\u5316\u65f6\uff1a"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\u672a\u8ba2\u9605\u5f53\u524d Context \u7684\u7ec4\u4ef6\uff0c\u4e0d\u4f1a\u89e6\u53d1 re-render"}),"\n",(0,o.jsx)(n.li,{children:"\u82e5 context \u4e3a Object, \u9664\u4e86\u53d8\u5316\u7684\u5c5e\u6027\uff0c\u8ba2\u9605\u5176\u4ed6\u5c5e\u6027\u7684\u7ec4\u4ef6\uff0c\u4e5f\u4f1a\u89e6\u53d1 re-render"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\u8003\u8651\u5982\u4e0b Context\uff0c\u4ee5\u53ca\u7ec4\u4ef6\u5f62\u5f0f\uff1a"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Context \u5305\u542b count, setCount, desc(\u4e0d\u4f1a\u53d8\u5316\u7684 string)"}),"\n",(0,o.jsx)(n.li,{children:"Body \u8ba2\u9605 count, setCount"}),"\n",(0,o.jsx)(n.li,{children:"Footer \u8ba2\u9605 desc"}),"\n",(0,o.jsx)(n.li,{children:"Body \u51fa\u53d1 setCount \u65f6\uff0cBody \u548c Footer \u4f1a re-render\u3002\u5176\u4ed6\u7ec4\u4ef6\uff0c\u5747\u4e0d\u4f1a re-render\u3002"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { FC, ReactNode, createContext, useState } from 'react';\n\nconst DESC = 'Click on the Vite and React logos to learn more';\n\nexport const AppContext = createContext<{\n  count: number;\n  setCount: (_: number) => void;\n  desc: string;\n}>({\n  count: 0,\n  setCount: (count: number) => console.log(count),\n  desc: DESC,\n});\n\ninterface AppContextProviderProps {\n  children?: ReactNode;\n}\n\nexport const AppContextProvider: FC<AppContextProviderProps> = ({\n  children,\n}) => {\n  const [count, setCount] = useState(0);\n\n  return (\n    <AppContext.Provider value={{ count, setCount, desc: DESC }}>\n      {children}\n    </AppContext.Provider>\n  );\n};\n"})}),"\n",(0,o.jsx)(n.mermaid,{value:"stateDiagram-v2\n    App --\x3e Header\n    App --\x3e Body\n    App --\x3e FooterWrapper\n    FooterWrapper --\x3e Footer\n    Context --\x3e Body: count, setCount\n    Context --\x3e Footer: desc"}),"\n",(0,o.jsx)(n.h3,{id:"zustand",children:"Zustand"}),"\n",(0,o.jsx)(n.p,{children:"Zustand \u63d0\u4f9b\u4e86\u539f\u5b50\u5f62\u5f0f\u9009\u62e9\uff0c\u6765\u907f\u514d state \u4e2d\u67d0\u4e2a\u503c\u53d8\u5316\uff0c\u5f15\u8d77\u8ba2\u9605\u4e86\u5176\u4ed6\u503c\u7684\u7ec4\u4ef6 re-render\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// useBearStore.ts\nimport { create } from 'zustand';\nimport { combine } from 'zustand/middleware';\n\nconst useBearStore = create(\n  combine(\n    { count: 0, desc: 'Click on the Vite and React logos to learn more' },\n    set => ({\n      addCount: () => set(state => ({ count: state.count + 1 })),\n    }),\n  ),\n);\n\nexport default useBearStore;\n\n// Body.tsx\nconst count = useBearStore(state => state.count);\nconst addCount = useBearStore(state => state.addCount);\n\n// Footer.tsx\n// addCount \u65f6\uff0c\u4e0d\u4f1a re-render\nconst desc = useBearStore(state => state.desc);\n// addCount \u65f6\uff0c\u4f1a re-render\nconst state = useBearStore();\n"})})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}}}]);