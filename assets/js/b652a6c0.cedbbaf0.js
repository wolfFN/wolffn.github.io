"use strict";(self.webpackChunkdocusaurus_demo=self.webpackChunkdocusaurus_demo||[]).push([[4474],{7168:(n,e,t)=>{t.d(e,{R:()=>i,x:()=>a});var s=t(30758);const l={},r=s.createContext(l);function i(n){const e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:i(n.components),s.createElement(r.Provider,{value:e},n.children)}},11582:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"tools/shell/awk","title":"awk","description":"\u7528\u9014","source":"@site/docs/tools/shell/awk.md","sourceDirName":"tools/shell","slug":"/tools/shell/awk","permalink":"/docs/tools/shell/awk","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"awk"},"sidebar":"tools","previous":{"title":"grep","permalink":"/docs/tools/shell/grep"},"next":{"title":"uniq","permalink":"/docs/tools/shell/uniq"}}');var l=t(86070),r=t(7168);const i={title:"awk"},a=void 0,c={},o=[{value:"\u7528\u9014",id:"\u7528\u9014",level:3},{value:"\u5904\u7406\u6d41\u7a0b",id:"\u5904\u7406\u6d41\u7a0b",level:3},{value:"\u57fa\u672c\u8bed\u6cd5\u683c\u5f0f",id:"\u57fa\u672c\u8bed\u6cd5\u683c\u5f0f",level:3},{value:"Options",id:"options",level:3},{value:"\u53d8\u91cf",id:"\u53d8\u91cf",level:3},{value:"Program",id:"program",level:3}];function d(n){const e={br:"br",code:"code",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h3,{id:"\u7528\u9014",children:"\u7528\u9014"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6587\u672c\u5904\u7406"}),"\n",(0,l.jsx)(e.li,{children:"\u8f93\u51fa\u683c\u5f0f\u5316\u7684\u6587\u672c\u62a5\u8868"}),"\n",(0,l.jsx)(e.li,{children:"\u6267\u884c\u7b97\u6570\u8fd0\u7b97"}),"\n",(0,l.jsx)(e.li,{children:"\u6267\u884c\u5b57\u7b26\u4e32\u64cd\u4f5c\u7b49\u7b49"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u5904\u7406\u6d41\u7a0b",children:"\u5904\u7406\u6d41\u7a0b"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{alt:"image.png",src:t(48801).A+"",width:"600",height:"530"})}),"\n",(0,l.jsx)(e.h3,{id:"\u57fa\u672c\u8bed\u6cd5\u683c\u5f0f",children:"\u57fa\u672c\u8bed\u6cd5\u683c\u5f0f"}),"\n",(0,l.jsx)(e.p,{children:"awk\u547d\u4ee4\u4f9d\u6b21\u8bfb\u53d6\u6587\u4ef6\u7684\u6bcf\u4e00\u884c\u5185\u5bb9\uff0c\u7136\u540e\u8fdb\u884c\u5904\u7406\u3002awk \u4f7f\u7528\u4e00\u5bf9\u5355\u5f15\u53f7\u6765\u8868\u793a \u4e00\u4e9b\u53ef\u6267\u884c\u7684\u811a\u672c\u4ee3\u7801\uff0c\u5728\u53ef\u6267\u884c\u811a\u672c\u4ee3\u7801\u91cc\u9762\uff0c\u4f7f\u7528\u4e00\u5bf9\u82b1\u62ec\u53f7\u6765\u8868\u793a\u4e00\u6bb5\u53ef\u6267\u884c\u4ee3\u7801\u5757\uff0c\u53ef\u4ee5\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u4ee3\u7801\u5757\u3002 awk \u7684\u6bcf\u4e2a\u82b1\u62ec\u53f7\u5185\u540c\u65f6\u53c8\u53ef\u4ee5\u6709\u591a\u4e2a\u6307\u4ee4\uff0c\u6bcf\u4e00\u4e2a\u6307\u4ee4\u7528\u5206\u53f7\u5206\u9694\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"awk [options] 'program' file\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u4e2d\uff1a"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"Options \u8868\u793a\u4e00\u4e9b\u53ef\u9009\u7684\u53c2\u6570\u9009\u9879\uff0c\u53ef\u9009\u3002"}),"\n",(0,l.jsx)(e.li,{children:"Program \u8868\u793aawk\u7684\u53ef\u6267\u884c\u4ee3\u7801\u811a\u672c\u3002"}),"\n",(0,l.jsx)(e.li,{children:"file\u8868\u793a\u8981\u5904\u7406\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u7a7a\u683c\uff0c\u95f4\u9694\u8f93\u5165\u591a\u4e2a\u6587\u4ef6\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"options",children:"Options"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"-F"})," , \u6307\u5b9a\u5206\u9694\u7b26\uff1b",(0,l.jsx)(e.br,{}),"\n","\u7ed3\u5408",(0,l.jsx)(e.code,{children:"[]"}),"\uff0c\u6307\u5b9a\u591a\u4e2a\u5206\u9694\u7b26",(0,l.jsx)(e.br,{}),"\n","\u5982\u4e0b\u4f8b\uff0c\u540c\u65f6\u4f7f\u7528\u4e24\u4fa7\u5c0f\u62ec\u53f7\u4f5c\u4e3a\u5206\u9694\u7b26"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"awk -F '[()]' '{print $1, $2, $3}' some.log\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"-f"}),", \u6307\u5b9a\u6587\u4ef6\uff0c\u4ece\u4e2d\u8bfb\u53d6 program"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"awk -f command.awk marks.txt\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\xa0",(0,l.jsx)(e.br,{}),"\n",(0,l.jsx)(e.code,{children:"-v"})," \u5728\u7a0b\u5e8f\u5f00\u59cb\u4e4b\u524d\u7ed9\u53d8\u91cf\u8d4b\u503c",(0,l.jsx)(e.br,{}),"\n",(0,l.jsx)(e.code,{children:"--dump-variables[=file]"})," \u9009\u9879\uff0c\u8f93\u51fa\u6392\u597d\u5e8f\u7684\u5168\u5c40\u53d8\u91cf\u5217\u8868\u548c\u5b83\u4eec\u6700\u7ec8\u7684\u503c\u5230\u6587\u4ef6\u4e2d\uff0c\u9ed8\u8ba4\u7684\u6587\u4ef6\u662f awkvars.out\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"\u53d8\u91cf",children:"\u53d8\u91cf"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"$0\t\t// \u5f53\u524d\u884c\n$1 $2 $n\t\t// \u7b2cn\u5217\nNR\t\t// \u884c\u53f7\nNF\t\t// \u5f53\u524d\u884c\u7684\u5217\u6570\n$NF\t\t// \u6700\u540e\u4e00\u5217\n$(NF-1)\t\t// \u5012\u6570\u7b2c\u4e8c\u5217\nFS\t//awk\u7684\u8f93\u5165\u5206\u9694\u7b26,\u9ed8\u8ba4\u4e3a\u7a7a\u683c\u548c\"\\t\"\nOFS\t\t//\u8f93\u51fa\u5206\u9694\u7b26, \u9ed8\u8ba4\u4e3a\u7a7a\u683c, ','\u4ee3\u8868\n\nFILENAME\t\t// \u6587\u4ef6\u540d\uff0c\u64cd\u4f5c\u591a\u4e2a\u6587\u4ef6\u65f6\u4f7f\u7528\nENVIRON // \u73af\u5883\u53d8\u91cf\nawk 'BEGIN { print ENVIRON[\"USER\"] }'\n"})}),"\n",(0,l.jsx)(e.h3,{id:"program",children:"Program"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"// fruit.txt\npeach    100   Mar  1997   China\nLemon    150   Jan  1986   America\nPear     240   Mar  1990   Janpan\navocado  120   Feb  2008   china\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"// BEGIN END\nawk 'BEGIN {print \"Start read file\"} {print $0} END {print \"End file\"}' /etc/passwd\n\n// \u683c\u5f0f\u5316\u8f93\u51fa\nawk '{print $1 \"\\t\" $2 \"\\t\" $3}' fruit.txt\n\n// \u58f0\u660e\u548c\u4f7f\u7528\u53d8\u91cf\nawk '{msg=\"hello world\"; print msg}' /etc/passwd\n\n// \u8f93\u51fa\u4e2d\uff0c\u4fee\u6539\u5217\u503c\uff0c\u4ec5\u5728\u6b64\u6b21print\u4e2d\u6709\u6548\nawk '{$2 = \"***\"; print $0}' fruit.txt\n\n// \u6761\u4ef6\nawk '$2 < 150 {print $0}' fruit.txt\nawk '{if ($2 < 150) print $0}' fruit.txt\n\nawk 'length($1)>4' fruit.txt\n\n// \u6b63\u5219\nawk '/^pea/{print $0}' fruit.txt\n\n// \u91cd\u5b9a\u5411 > \u8986\u76d6\uff0c>> \u8ffd\u52a0\nawk '/^pea/{print $0}' fruit.txt > tmp\nawk '/^pea/{print $0}' fruit.txt >> tmp\n"})})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(d,{...n})}):d(n)}},48801:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/process-f58cade72d25ffeaecce88486f1b2802.png"}}]);